/**
 * Load the carousel.
 *
 * @module    block_carousel/carousel
 * @copyright 2016 Brendan Heywood (brendan@catalyst-au.net)
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_carousel/carousel",["jquery","core/modal_factory","core/ajax","block_carousel/slick"],(function($,ModalFactory,Ajax){return{init:function(blockid,numslides,autoplay,playspeed){if($("#carousel"+blockid+" .slidewrap").show(),numslides>1)var breakpoints=[{breakpoint:1025,settings:{slidesToShow:2}},{breakpoint:769,settings:{slidesToShow:1}}];else breakpoints=[];var carousel=$("#carousel"+blockid);carousel.slick({dots:!0,infinite:!0,speed:300,slidesToShow:numslides,adaptiveHeight:!0,autoplay:autoplay,autoplaySpeed:playspeed,responsive:breakpoints}),new ResizeObserver((function(){$(window).trigger("resize")})).observe(carousel.get("0"))},modal:function(rowid,modalTitle){var slide=document.querySelector("#id_slide"+rowid);slide.addEventListener("click",(function(){ModalFactory.create({type:ModalFactory.types.CANCEL,title:modalTitle,body:slide.dataset.modalcontent}).then($.proxy((function(modal){modal.getRoot().addClass("block_carousel"),modal.setLarge(),modal.show()})))}))},videocontrol:function(blockid,slideid){var videocontrol=function(){var video=document.querySelector("#id_slidevideo"+slideid);"false"===$("#id_slidecontainer"+slideid).parents(".slick-slide").attr("aria-hidden")?video.play():video.pause()},carousel=$("#carousel"+blockid);carousel.on("afterChange",videocontrol),carousel.on("init",videocontrol)},interaction:function(slideid){document.querySelector("#id_slide"+slideid).addEventListener("click",(function(){var request={methodname:"block_carousel_record_interaction",args:{rowid:slideid}};Ajax.call([request])[0].fail()}))}}}));

//# sourceMappingURL=carousel.min.js.map