/**
 * Drag and drop order handler. This is adapted from the XMLDB editor in 3.6+
 *
 * @module    block_carousel/move
 * @copyright 2020 Peter Burnett <peterburnett@catalyst-au.net>
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_carousel/move",["jquery","core/sortable_list","core/ajax","core/notification"],(function($,SortableList,Ajax,Notification){return{init:function(blockId){var origIndex;new SortableList($("#slidetable tbody")).getElementName=function(element){return $.Deferred().resolve(element.attr("data-name"))},$("tr.slidetable").on(SortableList.EVENTS.DRAGSTART,(function(_,info){origIndex=info.sourceList.children().index(info.element),setTimeout((function(){$(".sortable-list-is-dragged").width(info.element.width())}),501)})).on(SortableList.EVENTS.DROP,(function(_,info){var newIndex=info.targetList.children().index(info.element),t=info.element.find("[data-action=move]");if(info.positionChanged){var request={methodname:"block_carousel_update_slide_order",args:{blockid:blockId,rowid:t.attr("data-rowid"),position:newIndex-origIndex}};Ajax.call([request])[0].fail(Notification.exception)}}))}}}));

//# sourceMappingURL=move.min.js.map